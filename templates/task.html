{% extends 'base.html' %}
{% block body %}

<section class="text-gray-700 body-font">
    <div class="container px-5 py-24 mx-auto">
        <div class="flex flex-wrap -m-4" id="taskContants">


            <!-- div start here -->


            <!-- <div class="p-4 md:w-1/3">
                <div class="h-full border-2 border-gray-200 rounded-lg overflow-hidden">
                    <img class="lg:h-48 md:h-36 w-full object-cover object-center"
                        src="https://source.unsplash.com/random/720x400" alt="blog">
                    <div class="p-6">

                        <h1 class="title-font text-lg font-medium text-gray-900 mb-3">{{task.test_title}}</h1>
                        <h2 class="tracking-widest text-xs title-font font-medium text-gray-500 mb-1">Date - {{task.task_date}}
                        </h2>
                        <h2 class="tracking-widest text-xs title-font font-medium text-gray-500 mb-1">Time - {{task.task_time}}
                        </h2>
                        <p class="leading-relaxed mb-3">{{task.test_desc}}</p>
                        <div class="flex items-center flex-wrap ">

                            <span class="text-gray-600 mr-3 inline-flex items-center lg:ml-auto md:ml-0 ml-auto leading-none text-sm pr-3 py-1 border-r-2 border-gray-300" onclick="update()">
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="443.7px"
                                    height="477.9px" viewBox="0 0 443.7 477.9" class="w-4 h-4 mr-1"
                                    style="enable-background:new 0 0 443.7 477.9;" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <path d="M392.5,0c-9.4,0-17.1,7.6-17.1,17.1v62.3C287.6-5.7,147.4-3.4,62.3,84.5C22.3,125.9-0.1,181.3,0,238.9
	c0,9.4,7.6,17.1,17.1,17.1s17.1-7.6,17.1-17.1c0-103.7,84.1-187.7,187.8-187.7c52.7,0,102.9,22.1,138.4,61l-75.6,25.2
	c-9,3-13.8,12.7-10.8,21.6s12.7,13.8,21.6,10.8l102.4-34.1c7-2.3,11.7-8.9,11.7-16.2V17.1C409.6,7.6,402,0,392.5,0z M426.7,221.9
	c-9.4,0-17.1,7.6-17.1,17.1c0,103.7-84.1,187.7-187.8,187.7c-52.7,0-102.9-22.1-138.4-61l75.6-25.2c9-3,13.8-12.7,10.8-21.6
	c-3-9-12.7-13.8-21.6-10.8L45.8,342.2c-7,2.3-11.7,8.9-11.7,16.2v102.4c0,9.4,7.6,17.1,17.1,17.1s17.1-7.6,17.1-17.1v-62.3
    c87.9,85.1,228.1,82.8,313.1-5.1c40.1-41.4,62.5-96.8,62.3-154.5C443.7,229.5,436.1,221.9,426.7,221.9z" />

                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </span>

                            <span class="text-gray-600 inline-flex items-center leading-none text-sm">
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="443.7px"
                                    height="477.9px" viewBox="0 0 443.7 477.9" class="w-4 h-4 mr-1"
                                    style="enable-background:new 0 0 443.7 477.9;" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <path
                                        d="M156.4,30.9h85.6v14.4h30.9V28.9C272.8,13,259.9,0,244,0h-89.6c-15.9,0-28.9,13-28.9,28.9v16.4h30.9V30.9z M344.2,167.8
                                    H54.1c-7.9,0-14.2,6.8-13.6,14.7l24.3,299.9c1.4,16.7,15.3,29.6,32.1,29.6h204.5c16.8,0,30.7-12.9,32.1-29.6l24.3-299.9
                                    C358.4,174.5,352.2,167.8,344.2,167.8z M124.3,480c-0.3,0-0.6,0-1,0c-8.1,0-14.9-6.3-15.4-14.5L92.8,219.3
                                    c-0.5-8.5,6-15.9,14.5-16.4c8.5-0.5,15.9,5.9,16.4,14.5l15.2,246.2C139.3,472.2,132.9,479.5,124.3,480z M214.8,464.6
                                    c0,8.5-6.9,15.4-15.5,15.4s-15.5-6.9-15.5-15.4V218.4c0-8.5,6.9-15.5,15.5-15.5c8.5,0,15.5,6.9,15.5,15.5V464.6z M305.5,219.3
                                    L291,465.5c-0.5,8.2-7.3,14.5-15.4,14.5c-0.3,0-0.6,0-0.9,0c-8.5-0.5-15-7.8-14.5-16.3l14.5-246.2c0.5-8.5,7.8-15,16.3-14.5
                                    C299.5,203.5,306,210.8,305.5,219.3z M397.6,120.1l-10.1-30.4c-2.7-8-10.2-13.4-18.6-13.4H29.4c-8.5,0-16,5.4-18.6,13.4L0.7,120.1
                                    c-2,5.9,0.6,11.9,5.3,14.8c1.9,1.2,4.2,1.9,6.8,1.9h372.8c2.5,0,4.8-0.7,6.8-1.9C397.1,131.9,399.6,125.9,397.6,120.1z" />

                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </span>

                        </div>
                    </div>
                </div>
            </div> -->
            <!-- div ends here -->





        </div>
    </div>
</section>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
    $(document).ready(function () {
        console.log("ready!");
        console.log("1st");

        $.ajax({
            type: "GET",
            url: "/fetch/",
            success: function (data) {
                console.log("Succcess ==== >");
                responce = JSON.parse(data)
                console.log(responce);
                data = responce.data
                for (let i = 0; i < data.length; i++) {
                    document.getElementById("taskContants").innerHTML += `
                        
                        <div class="p-4 md:w-1/3">
                <div class="h-full border-2 border-gray-200 rounded-lg overflow-hidden">
                    <img class="lg:h-48 md:h-36 w-full object-cover object-center"
                        src="https://source.unsplash.com/random/720x400" alt="blog">
                    <div class="p-6">

                        <h1 class="title-font text-lg font-medium text-gray-900 mb-3">${data[i].test_title}</h1>
                        <h2 class="tracking-widest text-xs title-font font-medium text-gray-500 mb-1">Date - ${data[i].task_date}
                        </h2>
                        <h2 class="tracking-widest text-xs title-font font-medium text-gray-500 mb-1">Time - ${data[i].task_time}
                        </h2>
                        <p class="leading-relaxed mb-3">${data[i].test_desc}</p>
                        <div class="flex items-center flex-wrap ">

                            <span class="text-gray-600 mr-3 inline-flex items-center lg:ml-auto md:ml-0 ml-auto leading-none text-sm pr-3 py-1 border-r-2 border-gray-300" onclick="update(${data[i].task_id})">
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="443.7px"
                                    height="477.9px" viewBox="0 0 443.7 477.9" class="w-4 h-4 mr-1"
                                    style="enable-background:new 0 0 443.7 477.9;" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <path d="M392.5,0c-9.4,0-17.1,7.6-17.1,17.1v62.3C287.6-5.7,147.4-3.4,62.3,84.5C22.3,125.9-0.1,181.3,0,238.9
	c0,9.4,7.6,17.1,17.1,17.1s17.1-7.6,17.1-17.1c0-103.7,84.1-187.7,187.8-187.7c52.7,0,102.9,22.1,138.4,61l-75.6,25.2
	c-9,3-13.8,12.7-10.8,21.6s12.7,13.8,21.6,10.8l102.4-34.1c7-2.3,11.7-8.9,11.7-16.2V17.1C409.6,7.6,402,0,392.5,0z M426.7,221.9
	c-9.4,0-17.1,7.6-17.1,17.1c0,103.7-84.1,187.7-187.8,187.7c-52.7,0-102.9-22.1-138.4-61l75.6-25.2c9-3,13.8-12.7,10.8-21.6
	c-3-9-12.7-13.8-21.6-10.8L45.8,342.2c-7,2.3-11.7,8.9-11.7,16.2v102.4c0,9.4,7.6,17.1,17.1,17.1s17.1-7.6,17.1-17.1v-62.3
    c87.9,85.1,228.1,82.8,313.1-5.1c40.1-41.4,62.5-96.8,62.3-154.5C443.7,229.5,436.1,221.9,426.7,221.9z" />

                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </span>

                            <span class="text-gray-600 inline-flex items-center leading-none text-sm" onclick="deleteTask(${data[i].task_id})">
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="443.7px"
                                    height="477.9px" viewBox="0 0 443.7 477.9" class="w-4 h-4 mr-1"
                                    style="enable-background:new 0 0 443.7 477.9;" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <path
                                        d="M156.4,30.9h85.6v14.4h30.9V28.9C272.8,13,259.9,0,244,0h-89.6c-15.9,0-28.9,13-28.9,28.9v16.4h30.9V30.9z M344.2,167.8
                                    H54.1c-7.9,0-14.2,6.8-13.6,14.7l24.3,299.9c1.4,16.7,15.3,29.6,32.1,29.6h204.5c16.8,0,30.7-12.9,32.1-29.6l24.3-299.9
                                    C358.4,174.5,352.2,167.8,344.2,167.8z M124.3,480c-0.3,0-0.6,0-1,0c-8.1,0-14.9-6.3-15.4-14.5L92.8,219.3
                                    c-0.5-8.5,6-15.9,14.5-16.4c8.5-0.5,15.9,5.9,16.4,14.5l15.2,246.2C139.3,472.2,132.9,479.5,124.3,480z M214.8,464.6
                                    c0,8.5-6.9,15.4-15.5,15.4s-15.5-6.9-15.5-15.4V218.4c0-8.5,6.9-15.5,15.5-15.5c8.5,0,15.5,6.9,15.5,15.5V464.6z M305.5,219.3
                                    L291,465.5c-0.5,8.2-7.3,14.5-15.4,14.5c-0.3,0-0.6,0-0.9,0c-8.5-0.5-15-7.8-14.5-16.3l14.5-246.2c0.5-8.5,7.8-15,16.3-14.5
                                    C299.5,203.5,306,210.8,305.5,219.3z M397.6,120.1l-10.1-30.4c-2.7-8-10.2-13.4-18.6-13.4H29.4c-8.5,0-16,5.4-18.6,13.4L0.7,120.1
                                    c-2,5.9,0.6,11.9,5.3,14.8c1.9,1.2,4.2,1.9,6.8,1.9h372.8c2.5,0,4.8-0.7,6.8-1.9C397.1,131.9,399.6,125.9,397.6,120.1z" />

                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </span>

                        </div>
                    </div>
                </div>
            </div>
                        
                        `
                }
            },
            dataType: "text",
            error: function (err) {
                console.log("---------ERROR----->")
                console.log(err.responseText);
            }
        });
    });
</script>

<script>
    function update(id){
        console.log(id);
        console.log(typeof(id));

        localStorage.setItem("task_id",id)
        window.location.replace("/update");
    }
</script>
<script>
    function deleteTask(id){
        console.log(id);
        console.log(typeof( id));
        
        let data = {
            task_id : id
        }

        $.ajax({
                type: "DELETE",
                url: "/delete/",
                data: JSON.stringify(data),
                success: function (data) {
                    console.log("Succcess ==== >");
                    responce = JSON.parse(data)
                    console.log(responce);
                    alert(responce.message)
                    // console.log(data.token);
                    // console.log("data 1 token");

                    // const tokenData = JSON.parse(data)
                    // console.log(tokenData);
                    // console.log(tokenData.token);
                    window.location.replace("/task");
                    // localStorage.setItem("token",tokenData.token)
                },
                dataType: "text",
                error: function (err) {
                    console.log("---------ERROR----->")
                    console.log(err.responseText);
                }
            });
        
    }
</script>


{% endblock body %}